var ppppp=null;!function(u,l){var n=function(p){var o={addTarget:l("body"),type:1,className:"",shade:{bgColor:"#000000",opacity:.5,close:!1},size:{full:0,width:"auto",height:"auto"},position:{fixed:1,pos:"m-c"},animate:["zoomIn","zoomOut"],autoClose:!1,move:0,head:"默认标题",opBtn:{close:1,min:1,max:1},con:{html:"提示信息",icon:1,src:null,btn:null},closeCallBack:null};p.addTarget=p.addTarget||l("body"),this.j=l.extend(!0,{},o,p),this.createDom()};n.prototype={constructor:n,popupId:0,allPopupList:null,alertType:["alert","html","iframe","loading","taps","tab"],alertIcon:['<i class="evicon evicon-right-1 text-success"></i>','<i class="evicon evicon-close-2 text-warning"></i>','<i class="evicon evicon-point-2 text-info"></i>','<i class="evicon load-wait"></i>'],winAttr:function(){var p=l(u),o=l(document);return{winW:p.width(),winH:p.height(),docW:o.width(),docH:o.height(),docST:o.scrollTop(),docSL:o.scrollLeft(),popupW:this.popup.width(),popupH:this.popup.height()}},randomS:function(p){var o,t="12345qwertyuiopasdfgh67890jklmnbvcxzMNBVCZXASDQWERTYHGFUIOLKJP",e=t.length,i="";for(p=p||5,o=0;o<p;o++)i+=t.charAt(Math.floor(Math.random()*e));return i},maxZindex:function(){var e=[];return this.j.addTarget.children().each(function(p,o){var t=(o=l(o)).css("z-index");!isNaN(t)&&e.push(1*t)}),Math.max(Math.max.apply(null,e),1e3)},createDom:function(){var o=this,t=o.j,p=[],e=[],i=[];o.winObject={originWindow:u,originDocument:u.document,parWindow:u.parent,parDocument:u.parent.document,topWindow:u.top,topDocument:u.top.document},o.popupId=o.randomS(5),o.maxZindex(),o.zIndex=o.maxZindex()+1;var n,a,s=o.winObject.topWindow.evPopup,c=!0;s&&s["popup_"+o.popupId]&&(o.popupId=o.randomS(5)),s&&l.each(s,function(p,o){if(o)return c=null,!1}),c&&(s=o.winObject.topWindow.evPopup={}),s["popup_"+o.popupId]=o,t.shade&&(n=["z-index:"+o.zIndex++],t.shade.bgColor&&n.push(" background-color:"+t.shade.bgColor),!isNaN(t.shade.opacity)&&("string"==typeof t.shade.opacity||"number"==typeof t.shade.opacity)&&n.push(" opacity:"+t.shade.opacity),o.popupShade=l("<div/>",{class:"popup-shade",id:"popupShade_"+o.popupId,style:n.join(";")}).appendTo(t.addTarget),t.shade.close&&o.popupShade.on("click",function(){o.popupClose()})),t.head&&p.push('<div class="popup-head"><span class="popup-title">'+(t.head||"")+"</span></div>"),t.opBtn&&(e.push('<div class="popup-option">'),t.opBtn.min&&e.push('<i class="evicon evicon-resize-xs-1" data-action="min" title="最小化"></i>'),t.opBtn.max&&e.push('<i class="evicon evicon-resize-lg-1" data-action="max" title="最大化"></i><i class="evicon evicon-resize-orig-1" data-action="orig" title="还原"></i>'),t.opBtn.close&&e.push('<i class="evicon evicon-close-1" data-action="close" title="关闭"></i>'),e.push("</div>")),function(){switch(i.push('<div class="popup-body"><div class="popup-body-inside">'),t.type){case 1:i.push('<div class="popup-alert-con"><div class="popup-hint-info">'),t.con.icon&&i.push(o.alertIcon[t.con.icon-1]||o.alertIcon[0]),t.con.html&&i.push(t.con.html),i.push("</div></div>"),t.con.btn&&(i.push('<div class="popup-but-area"><span class="popup-but">'),l.each(t.con.btn,function(p,o){i.push('<a href="javascript:;" data-btn-index="'+p+'" data-action="btn" class="btn btn-sm '+o.className+'">'+o.text+"</a>")}),i.push("</span></div>"));break;case 2:i.push('<div class="popup-layer-con">'),i.push(t.con.html?t.con.html instanceof jQuery?t.con.html.html():t.con.html:"<p>html代码</p>"),i.push("</div>");break;case 3:i.push('<div class="popup-iframe-con"><div class="popup-loading-wait"></div>'),i.push('<iframe src="'+t.con.src+'" frameborder="0" allowTransparency="true" name="popup_'+o.popupId+'" id="popup_'+o.popupId+'"></iframe>'),i.push("</div>");break;case 4:i.push('<div class="popup-loading-con"><div class="loading-type-'+t.con.icon+'"></div></div>')}i.push("</div></div>")}(),a=["z-index:"+o.zIndex++],!isNaN(t.size.width)&&a.push(" width:"+t.size.width+"px"),!isNaN(t.size.height)&&a.push(" height:"+t.size.height+"px"),o.popup=l("<div/>",{class:"popup popup-"+o.alertType[t.type-1]+(t.className?" "+t.className:"")+(t.animate&&t.animate.length?" "+t.animate[0]:""),style:a.join(";"),id:"popup_"+o.popupId,html:e.join("")+p.join("")+i.join("")}),t.animate&&t.animate.length&&o.popup.attr("data-animated",t.animate),o.popup.appendTo(t.addTarget),o.popupCountWH(),o.popupOffset(),o.popup.on({click:function(){var p=l(this);switch(p.data("action")){case"min":o.popupMin();break;case"max":o.popupMax();break;case"orig":o.popupOrig();break;case"close":o.popupClose();break;case"btn":t.con.btn&&t.con.btn[p.data("btnIndex")].callBack&&t.con.btn[p.data("btnIndex")].callBack(),t.con.btn[p.data("btnIndex")].noClose||o.popupClose()}}},".popup-option .evicon,.popup-but .btn"),t.size.full&&t.opBtn&&t.opBtn.max&&o.popupMax(),isNaN(t.autoClose)||"string"!=typeof t.autoClose&&"number"!=typeof t.autoClose||setTimeout(function(){o.popupClose()},1e3*t.autoClose)},popupOffset:function(){var p=this,o=p.j,t={"t-l":{left:0,top:0},"t-c":{left:"50%",top:0,"margin-left":-p.popup.width()/2+"px"},"t-r":{right:0,top:0},"m-l":{left:0,top:"50%","margin-top":-p.popup.height()/2+"px"},"m-c":{left:"50%",top:"50%","margin-top":-p.popup.height()/2+"px","margin-left":-p.popup.width()/2+"px"},"m-r":{right:0,top:"50%","margin-top":-p.popup.height()/2+"px"},"b-l":{left:0,bottom:0},"b-c":{left:"50%",bottom:0,"margin-left":-p.popup.width()/2+"px"},"b-r":{right:0,bottom:0}};!1===o.position.fixed&&p.popup.css({position:"absolute"}),p.popup.css(t[o.position.pos]||t["m-c"])},popupCountWH:function(){var p,o,t,e=this,i=e.j,n=e.winAttr();switch(i.type){case 3:(t=e.popup.find("iframe")).on("load.resize",function(){var p,o;t.siblings(".popup-loading-wait").remove(),t[0].contentWindow.iframeNumber=e.popupId,t[0].contentWindow.popup=e,i.size.full?t.css({width:"100%",height:e.popup.height()-(i.head?e.popup.find(".popup-head").outerHeight()+5:0)+"px"}):t.css({width:("auto"===i.size.width?t.contents().width():i.size.width)+"px",height:("auto"===i.size.height?t.contents().height():i.size.height-(i.head?e.popup.find(".popup-head").outerHeight()+5:0))+"px"}),p=i.size.width,o=i.size.height,p="auto"===p?e.popup.width():p,o="auto"===o?e.popup.height():o,p=p>n.winW?n.winW-10:p,o=o>n.winH?n.winH-10:o,e.popup.css({width:p+"px",height:o+"px"}),t.css({width:p+"px",height:o-(i.head?e.popup.find(".popup-head").outerHeight()+5:0)+"px"}),e.popupOffset()});break;default:p=i.size.width,o=i.size.height,p="auto"===p?e.popup.width():p,o="auto"===o?e.popup.height():o,p=p>n.winW?n.winW-10:p,o=o>n.winH?n.winH-10:o,e.popup.css({width:p+"px",height:o+"px"})}},popupMin:function(){var p=this,o=p.j;!p.originStyle&&(p.originStyle=p.popup.attr("style"));var t=p.popup.css("z-index"),e="bottom: 0; left:"+210*o.addTarget.find(".popup-size-min").length+"px; margin: 0; z-index:"+t+";";p.popup.addClass("popup-size-min").removeClass("popup-size-max").attr({style:e}),p.popupShade&&p.popupShade.hide()},popupMax:function(){var p=this;!p.originStyle&&(p.originStyle=p.popup.attr("style"));var o="z-index:"+p.popup.css("z-index")+";";p.popup.addClass("popup-size-max").removeClass("popup-size-min").attr({style:o}),p.popupShade&&p.popupShade.show()},popupOrig:function(){var p=this,o=p.j;p.popup.removeClass("popup-size-max popup-size-min").attr({style:p.originStyle}),p.popupShade&&p.popupShade.show(),o.size.full&&o.opBtn&&o.opBtn.max&&p.popupOffset()},popupClose:function(){var p=this,o=p.j;o.animate&&o.animate.length&&p.popup.removeClass(o.animate[0]).addClass(o.animate[1]),setTimeout(function(){"function"==typeof o.closeCallBack&&o.closeCallBack(),p.popup.remove(),p.popupShade&&p.popupShade.remove(),p.winObject.topWindow.evPopup["popup_"+p.popupId]=null,p=null},210)},popupDrag:function(){this.j.head&&this.popup.drag({parent:"parent",randomPosition:!1,direction:"all",handler:".popup-head"})}},l.popup=function(p){return new n(p)},l.popupAlert=function(p){switch(!0){case l.isArray(p):p={head:p[0],con:{html:p[1],btn:{btn1:{callBack:p[2]}}}};break;case l.isPlainObject(p):p.type=1}return new n(l.extend(!0,{},{type:1,position:{pos:"m-c"},opBtn:{close:1,min:0,max:0},size:{width:300},con:{html:"提示信息",icon:3,btn:{btn1:{text:"确定",className:"btn-primary"}}}},p))},l.popupPoint=function(p){return l.isArray(p)&&(p={con:{html:p[0],icon:p[1]},autoClose:p[2],closeCallBack:p[3]}),new n(l.extend(!0,{},{type:1,head:!1,shade:{close:0},position:{pos:"m-c"},opBtn:!1,con:{html:"提示信息",icon:1,btn:!1},autoClose:1},p))},l.popupConfirm=function(p){return l.isArray(p)&&(p={head:p[0],con:{html:p[1],btn:{btn1:{callBack:p[2]},btn2:{callBack:p[3]}}}}),new n(l.extend(!0,{},{type:1,position:{pos:"m-c"},opBtn:{close:1,min:0,max:0},size:{width:300},con:{html:"提示信息",icon:3,btn:{btn1:{text:"确定",className:"btn-primary"},btn2:{text:"取消",className:"btn-outline-danger"}}}},p))},l.popupPrompt=function(p){l("input");return l.isArray(p)&&(p={head:p[0],con:{text:p[1],btn:{btn1:{callBack:p[2]},btn2:{callBack:p[3]}}},closeCallBack:p[3]}),new n(l.extend(!0,{},{type:1,position:{pos:"m-c"},opBtn:{close:1,min:0,max:0},size:{width:300},con:{icon:1,btn:{btn1:{text:"确定",className:"btn-primary"},btn2:{text:"取消",className:"btn-outline-danger"}}}},p))},l.popupHtml=function(p){var o,t,e=l(u),i=function(p){return p instanceof jQuery?p=p.html():"string"==typeof p&&-1!=l.inArray(p.substr(0,1),[".","#"])&&l(p).length&&(p=l(p).html()),p};switch(!0){case l.isArray(p):p={head:p[0],con:{html:i(p[1])},size:{width:(t="auto",p[2]&&(t=p[2]>e.width()?e.width()-20:p[2]),t),height:(o="auto",p[3]&&(o=p[3]>e.width()?e.width()-20:p[3]),o)},closeCallBack:p[4]};break;case l.isPlainObject(p):p.type=2,p.con.html=i(p.con.html)}return new n(l.extend(!0,{},{type:2,head:"HTML层",position:{pos:"m-c"},opBtn:{close:1,min:0,max:1},con:{html:"<p>这是html代码</p>"}},p))},l.popupIframe=function(p){var o,t,e=l(u);return l.isArray(p)&&(p={head:p[0],con:{src:p[1]},size:{width:(t="auto",p[2]&&(t=p[2]>e.width()?e.width()-20:p[2]),t),height:(o="auto",p[3]&&(o=p[3]>e.width()?e.width()-20:p[3]),o)},closeCallBack:p[4]}),new n(l.extend(!0,{},{type:3,position:{pos:"m-c"},opBtn:{close:1,max:0,min:0},con:{src:"http://www.evyun.cn"}},p))},l.popupLoading=function(p){return l.isArray(p)&&(p={con:{icon:p[0]},autoClose:p[1],closeCallBack:p[2]||null}),new n(l.extend(!0,{},{type:4,head:!1,shade:{close:0},position:{pos:"m-c"},opBtn:!1,con:{icon:1}},p))}}(window,jQuery),$(document).on("click.popup",'[data-toggle="popup"]',function(p){var o=$(this).data();switch(o.popupType){case"alert":$.popupAlert([o.popupHead,o.popupHint]);break;case"point":$.popupPoint([o.popupHint,o.popupIcontype,o.popupClosetiem]);break;case"html":$.popupHtml([o.popupHead,o.popupTarget,o.popupWidth,o.popupHeight]);break;case"loading":$.popupLoading([o.popupIcontype,o.popupClosetiem]);break;case"iframe":$.popupIframe([o.popupHead,o.popupSrc,o.popupWidth,o.popupHeight])}});